<div style="background-color: var(--tf-projects-bg-color)" class="bg-gradient py-3" id="projects">
  <div class="container">
    <div class="row align-items-center mb-4">
      <div class="col-md-6">
        <h1 class="display-4 text-start">Projects</h1>
      </div>
      
      <div class="col-md-6 text-md-end">
        <div class="btn-group btn-group-sm" role="group">
          <button type="button" class="btn btn-outline-dark active" onclick="filterProjects('all')">All</button>
          <button type="button" class="btn btn-outline-dark" onclick="filterProjects('Flutter')">Flutter</button>
          <button type="button" class="btn btn-outline-dark" onclick="filterProjects('C++')">C++</button>
          <button type="button" class="btn btn-outline-dark" onclick="filterProjects('Java')">Java</button>
        </div>
      </div>
    </div>

    {% assign all_projects = site.pages | where: "type", "project" | where_exp: "p", "p.draft != true" | sort: "date" | reverse %}
    
    <div class="vstack gap-3" id="project-container">
      {% for page in all_projects %}
        <div class="project-wrapper" data-labels="{{ page.labels | join: ',' }}">
          {% include projects/project-card.html page=page %}
        </div>
        
        {% if forloop.index == include.limit %}{% break %}{% endif %}
      {% endfor %}
    </div>

    {% if all_projects.size > include.limit %}
      <p class="text-center pt-4">
        <a href="{{ '/projects/' | relative_url }}" class="btn btn-link text-decoration-none">
          See all {{ all_projects.size }} projects <i class="fas fa-arrow-right ms-1"></i>
        </a>
      </p>
    {% endif %}

  </div>
</div>

<script>
// Simple script to handle button clicks
function filterProjects(label) {
  const items = document.querySelectorAll('.project-wrapper');
  
  items.forEach(item => {
    if (label === 'all' || item.getAttribute('data-labels').includes(label)) {
      item.style.display = 'block';
    } else {
      item.style.display = 'none';
    }
  });

  // Update button active state
  document.querySelectorAll('.btn-group .btn').forEach(btn => {
    btn.classList.remove('active');
    if(btn.innerText === label || (label === 'all' && btn.innerText === 'All')) {
      btn.classList.add('active');
    }
  });
}
</script>